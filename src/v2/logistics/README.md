# Simplified Logistics Network

As an initial implementation, a Logistics Network is a graph of nodes scattered throughout a room which represent sources and sinks for varous resources in the network. A limited set of Haulers will work the network, attempting to satisfy each Request.

### Requests

Requests will be for Energy only to start.

Request are represented by objects of this type:

```javascript
{
  resource: RESOURCE_ENERGY,
  request: 'pickup'|'delivery',
  type: 'resource'|'creep'|'structure',
  total?: number,       //
  amount: number,      // Amount of Resources requested
  buffer: number,      // Buffer size of the container RoomObject
  delta: number,       // Amount of esimated buffered Resource change per tick
  persistent?: boolean, // Request will remain even if amount is reduced to zero
  timeout: number,     // Game tick when this request is no longer valid
  target: RoomObject,  // Target containing the resource or capacity
}
```

Single transient objects can register a request to have their resources removed. This could be `tombstones`, dropped `resources`, `Labs`, etc. Tombstones and Resources can set a `timeout` for when they will be invalid.

Requests can set a high `amount`, limited by a small `buffer`. This can be useful when a Builder requires 100,000 energy for a `Terminal` but can only hold 2000 at a time. The request will be for 100,000, with a buffer of 2000, and a delta of -25.

Requests can set a delta to represent an overtime trickle of resources (such as a Harvest Container). This lets Haulers predict into the future how much resource there will be.


### Haulers

For now, we could hard code a capacity metric, such as the throughput generated by the sources.

Each Hauler will be given a plan. Plans are a list of requests that they will fulfil in sequence. Each plan step includes the expected arrival time (based on path), the amount of Resource transfered.

This way, we can predict into the future what the Hauler's state will be at a later date.

The simplest algorithm would be to always add new requests to the plan Hauler who's plan will be able to reach the request soonest (temporally). This can definitely be improved, but should work pretty well for a while.

Hauler's cannot take requests if they will expire before they reach the destination.

If a Hauler dies for some reason (hostiles), it releases all requests in it's plan.
